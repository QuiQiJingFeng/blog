---
layout: post
title:  "android资源丢失问题"
image: ''
date:   2025-08-20 14:07:04
tags:
- Cocos
description: ''
categories: 
- Cocos
---
### android oaid库中oppo渠道当应用的广告跟踪权限关闭之后应用启动会发生崩溃
```
原因是oaid库中oppo的实现有硬编码引用0x7f050112的资源,导致shrinkResources参数进行的资源裁剪掉了0x7f050112
```
#### 修复
```java
    buildTypes {
        release {
            shrinkResources true   //这里需要去掉或者改成false
        }
    }
```
#### 查看工具
```
aapt dump resources xxx_oppo.apk > keep.lua
```

#### 崩溃堆栈
```
#2 main

android.content.res.Resources$NotFoundException

Resource ID #0x7f050112

解析原始
1
java.lang.RuntimeException:Unable to start activity ComponentInfo{com.ihuman.imath/com.bun.miitmdid.utilsforrequestpermission.PermissionTransparentActivity}: android.content.res.Resources$NotFoundException: Resource ID #0x7f050112
2
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:4381)
3
......
4
Caused by:
5
android.content.res.Resources$NotFoundException:Resource ID #0x7f050112
6
android.content.res.ResourcesImpl.getValueForDensity(ResourcesImpl.java:312)
7
android.content.res.Resources.getDrawableForDensity(Resources.java:1027)
8
android.content.res.Resources.getDrawable(Resources.java:967)
9
android.content.Context.getDrawable(Context.java:996)
10
android.view.View.setBackgroundResource(View.java:26786)
11
com.bun.miitmdid.utilsforrequestpermission.PermissionTransparentActivity.onCreate(Native Method)
12
android.app.Activity.performCreate(Activity.java:9196)
13
android.app.Activity.performCreate(Activity.java:9168)
14
android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1544)
15
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:4355)
16
android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:4578)
17
android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:126)
18
android.app.servertransaction.TransactionExecutor.executeNonLifecycleItem(TransactionExecutor.java:179)
19
android.app.servertransaction.TransactionExecutor.executeTransactionItems(TransactionExecutor.java:114)
20
android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:86)
21
android.app.ActivityThread$H.handleMessage(ActivityThread.java:2909)
22
android.os.Handler.dispatchMessage(Handler.java:112)
23
android.os.Looper.loopOnce(Looper.java:288)
24
android.os.Looper.loop(Looper.java:393)
25
android.app.ActivityThread.main(ActivityThread.java:9559)
26
java.lang.reflect.Method.invoke(Native Method)
27
com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:600)
28
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1005)
```