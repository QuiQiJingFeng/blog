---
layout: post
title:  "合并drawcall-一个shader多个图片"
image: ''
date:   2025-07-31 10:15:18
tags:
- cocos
description: ''
categories: 
- cocos
---
## 通过一个shader传多张图来进行合并drawcall
1. 显著减少 drawcall 数量
多个对象只要使用同一个 shader 和材质（比如共享一个 texture array 或 atlas），即使它们来自不同的贴图源，也能一次性批量渲染，大大减轻 CPU -> GPU 通信负担。

2. 提升渲染性能
减少状态切换（如纹理绑定）和 drawcall 数，可以提高帧率，尤其是在移动端或中低端设备上。

3. 适用于大量小图
适合用于 2D 游戏的精灵、UI、字形（字体）、图标等场景。

4. GPU 利用率更高
减少上下文切换、批次破碎，更好地利用 GPU 的并行处理能力。

```
uniform sampler2D u_textures[4];   //一次性绑定多张贴图
uniform int u_textureIndex;        //指定当前对象使用哪张贴图
```